# Stelars Burgers: –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è —Å–∞–π—Ç–∞ Stellar Burgers —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (DEV, STAGE)
–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤ (chrome, firefox). –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –º–∏–Ω–∏–º—É–º –¥–≤–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- –û–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config/environments.py`.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å, email).
- –ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```python
from config.environments import get_env_config, get_user

env = get_env_config("DEV")
user = get_user(env.default_user)
```

---

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### 1. –í—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç DEV-–æ–∫—Ä—É–∂–µ–Ω–∏–µ. –î–ª—è —Å–º–µ–Ω—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é `--env`:

```bash
pytest --env=DEV
pytest --env=STAGE
```

### 2. –ó–∞–ø—É—Å–∫ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Chrome. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ Firefox:

```bash
pytest --browser=chrome
pytest --browser=firefox
```

–ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å:

```bash
pytest --env=STAGE --browser=firefox
```

### 3. –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
pytest
```

### 4. –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
pytest tests/test_registration.py::TestRegistration::test_registration
```

---

---

## üê≥ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
```bash
docker-compose build
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞

#### 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –Ω–∞ DEV –≤ Chrome
```bash
docker-compose up stelars-tests
```

#### 2. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ STAGE
```bash
docker-compose up stelars-tests-stage
```

#### 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ Firefox
```bash
docker-compose up stelars-tests-firefox
```

#### 4. –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ smoke —Ç–µ—Å—Ç–æ–≤
```bash
docker-compose up stelars-tests-smoke
```

#### 5. –ó–∞–ø—É—Å–∫ Allure —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
```bash
docker-compose up allure-server
```
Allure –æ—Ç—á–µ—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:5050

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
docker-compose run --rm stelars-tests /app/run_tests.sh pytest -m regression --browser=chrome --env=dev -v
```

### –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑—ã
docker-compose down --rmi all

# –£–¥–∞–ª–∏—Ç—å volumes
docker-compose down -v
```

---

## üíª –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- Google Chrome –∏/–∏–ª–∏ Mozilla Firefox
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ requirements.txt

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### 1. –í—ã–±–æ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
pytest --env=DEV
pytest --env=STAGE
```

#### 2. –ó–∞–ø—É—Å–∫ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
```bash
pytest --browser=chrome
pytest --browser=firefox
```

#### 3. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
pytest --env=STAGE --browser=firefox --headless
```

#### 4. –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
pytest tests/test_registration.py::TestRegistration::test_registration
```

#### 5. –ó–∞–ø—É—Å–∫ —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏
```bash
pytest -m smoke
pytest -m regression
```

---

## üìä –û—Ç—á–µ—Ç—ã

### Allure –æ—Ç—á–µ—Ç—ã
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤
pytest --alluredir=allure_results

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤
allure serve allure_results
```

### HTML –æ—Ç—á–µ—Ç—ã
```bash
pytest --html=reports/report.html --self-contained-html
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Stelars_burgers/
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ environments.py
‚îú‚îÄ‚îÄ data/                   # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ credentials.py
‚îú‚îÄ‚îÄ pages/                  # Page Object –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ base_page.py
‚îÇ   ‚îú‚îÄ‚îÄ registration.py
‚îÇ   ‚îî‚îÄ‚îÄ login_pages/
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_registration.py
‚îÇ   ‚îú‚îÄ‚îÄ test_sign_in.py
‚îÇ   ‚îî‚îÄ‚îÄ test_navigation.py
‚îú‚îÄ‚îÄ allure_results/         # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã Allure (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ pytest_reports/        # HTML –æ—Ç—á–µ—Ç—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ Dockerfile             # Docker –æ–±—Ä–∞–∑ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ docker-compose.yml     # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ conftest.py            # Pytest –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ñ–∏–∫—Å—Ç—É—Ä—ã
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Docker
- `PYTHONPATH=/app` - –ø—É—Ç—å –∫ –º–æ–¥—É–ª—è–º Python
- `DISPLAY=:99` - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–ª–µ–π –¥–ª—è headless —Ä–µ–∂–∏–º–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ `config/environments.py`:
```python
USERS = {
    "dev_user1": UserCredentials("username", "password", "email@example.com"),
    "stage_user1": UserCredentials("username", "password", "email@example.com"),
}
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **Docker –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```bash
   docker-compose up stelars-tests
   ```
3. **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
   ```bash
   pip install -r requirements.txt
   pytest
   ```

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –±—Ä–∞—É–∑–µ—Ä–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ –≤–∞—à–µ–º conftest.py.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∑–∞–¥–∞—é—Ç—Å—è –≤ `config/environments.py`.
- Docker –æ–±—Ä–∞–∑ –≤–∫–ª—é—á–∞–µ—Ç Chrome, Firefox –∏ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∏—Å–ø–ª–µ–π (Xvfb) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ –≤ headless —Ä–µ–∂–∏–º–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. 